<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://oceansidez.github.io</id>
    <title>Gridea</title>
    <updated>2024-08-08T05:50:48.544Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://oceansidez.github.io"/>
    <link rel="self" href="https://oceansidez.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://oceansidez.github.io/images/avatar.png</logo>
    <icon>https://oceansidez.github.io/favicon.ico</icon>
    <rights>All rights reserved 2024, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[test2]]></title>
        <id>https://oceansidez.github.io/post/test2/</id>
        <link href="https://oceansidez.github.io/post/test2/">
        </link>
        <updated>2024-08-08T03:30:20.000Z</updated>
        <content type="html"><![CDATA[<h1 id="todo-æ–‡ä»¶å‹ç¼©ä¸ºzipå¹¶è¿›è¡Œä¸‹è½½">todo-æ–‡ä»¶å‹ç¼©ä¸ºzipå¹¶è¿›è¡Œä¸‹è½½</h1>
<ol>
<li><strong>æ ¹æ®ä¸šåŠ¡idæŸ¥è¯¢å…³è”çš„æ–‡ä»¶ï¼Œä¼ å…¥ä¸‹è½½çš„åç§°(ä¸åŒ…å«åç¼€)å’Œå¯¹åº”çš„æ–‡ä»¶åˆ—è¡¨</strong></li>
</ol>
<pre><code class="language-java">public void downLoadZip(HttpServletResponse response, String id) {
        TReimbursement reimbursement = get(id);
        SysFile fileParam = new SysFile();
        fileParam.setBusinessId(id);
        List&lt;SysFile&gt; fileList = sysFileService.findList(fileParam);
        // æŸ¥è¯¢æ‰€æœ‰æ˜ç»†çš„é™„ä»¶
        List&lt;TReimbursementdetail&gt; detailList = tReimbursementdetailDao.findList(new TReimbursementdetail(new TReimbursement(id)));
        detailList.forEach(detail -&gt; {
            SysFile detailFileParam = new SysFile();
            detailFileParam.setBusinessId(detail.getId());
            fileList.addAll(sysFileService.findList(detailFileParam));
        });
        String fileName = StringUtils.trim(reimbursement.getCreateBy().getName() + &quot;_&quot; + reimbursement.getReimbursementCode() + &quot;_&quot; + reimbursement.getTotalamount());
        Map&lt;String, List&lt;SysFile&gt;&gt; map = new HashMap&lt;&gt;();
        map.put(fileName, fileList);
        sysFileService.downloadZip(response, fileName, map);
    }
</code></pre>
<ol start="2">
<li><strong>è®¾ç½®å“åº”æ–¹å¼å’Œå“åº”å¤´(ç”¨äºä¸‹è½½æ—¶çš„æ–‡ä»¶åå±•ç¤º)</strong></li>
</ol>
<blockquote>
<ul>
<li>â€‹<code>response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename*=utf-8''&quot; + URLEncoder.encode(&quot;ç¡¬ä»¶è®¾å¤‡ç±»è´¹ç”¨æ¨¡æ¿.xlsx&quot;, &quot;UTF-8&quot;));</code>â€‹</li>
<li><code>attachment</code>â€‹ï¼šæŒ‡ç¤ºæµè§ˆå™¨å°†å†…å®¹ä½œä¸ºé™„ä»¶å¤„ç†ï¼Œè§¦å‘ä¸‹è½½è€Œä¸æ˜¯ç›´æ¥æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­ã€‚</li>
<li>â€‹<code>filename*=utf-8'zh_cn'</code>â€‹ï¼šç”¨äºæŒ‡å®šæ–‡ä»¶åçš„ç¼–ç æ ¼å¼å’Œè¯­è¨€ã€‚<code>utf-8</code>â€‹ è¡¨ç¤ºæ–‡ä»¶åä½¿ç”¨ UTF-8 ç¼–ç ï¼Œ<code>zh_cn</code>â€‹ è¡¨ç¤ºæ–‡ä»¶åçš„è¯­è¨€æ˜¯ç®€ä½“ä¸­æ–‡ã€‚</li>
<li>â€‹<code>downloadName</code>â€‹ï¼šå®é™…çš„æ–‡ä»¶åã€‚</li>
</ul>
</blockquote>
<pre><code class="language-java">public void downloadZip(HttpServletResponse response, String fileName, Map&lt;String, List&lt;SysFile&gt;&gt; files) {
        OutputStream outputStream = null;
        ZipOutputStream zos = null;
        try {
            String downloadName = fileName + &quot;.zip&quot;;
            downloadName = URLEncoder.encode(downloadName, &quot;UTF-8&quot;);
            response.setContentType(&quot;multipart/form-data&quot;);
            response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename*=utf-8'zh_cn'&quot; + downloadName);
            outputStream = response.getOutputStream();
            zos = new ZipOutputStream(outputStream);
            // å°†æ–‡ä»¶æµå†™å…¥zipä¸­
            downloadToLocal(zos, files);
        } catch (IOException e) {
            logger.error(&quot;æ‰¹é‡ä¸‹è½½é™„ä»¶å¤±è´¥ï¼ŒprocessInstanceId=[{}],é”™è¯¯ä¿¡æ¯=[{}]&quot;, fileName, e);
        } finally {
            if (zos != null) {
                try {
                    zos.close();
                } catch (Exception e2) {
                    logger.info(&quot;å…³é—­è¾“å…¥æµæ—¶å‡ºç°é”™è¯¯&quot;, e2);
                }
            }
            if (outputStream != null) {
                try {
                    outputStream.close();
                } catch (Exception e2) {
                    logger.info(&quot;å…³é—­è¾“å…¥æµæ—¶å‡ºç°é”™è¯¯&quot;, e2);
                }
            }
        }
    }
</code></pre>
<ol start="3">
<li>â€</li>
</ol>
<pre><code class="language-java">private void downloadToLocal(ZipOutputStream zos, Map&lt;String, List&lt;SysFile&gt;&gt; files) {
        for (String key : files.keySet()) {
            for (SysFile sysFile : files.get(key)) {
                String filePath = Encodes.urlDecode(sysFile.getFilePath());
                File file = new File(filePath);
                InputStream is = null;
                BufferedInputStream in = null;
                byte[] buffer = new byte[1024];
                int len;
                //åˆ›å»ºzipå®ä½“ï¼ˆä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªZipEntryï¼‰
                ZipEntry entry = new ZipEntry(key + File.separator + sysFile.getFileName());
                try {
                    in = new BufferedInputStream(new FileInputStream(file));
                    zos.putNextEntry(entry);
                    //æ–‡ä»¶æµå¾ªç¯å†™å…¥ZipOutputStream
                    while ((len = in.read(buffer)) != -1) {
                        zos.write(buffer, 0, len);
                    }
                } catch (Exception e) {
                    logger.info(&quot;æ‰¹é‡ä¸‹è½½æ–‡ä»¶å‡ºé”™&quot;, e);
                } finally {
                    if (entry != null) {
                        try {
                            zos.closeEntry();
                        } catch (Exception e2) {
                            logger.info(&quot;æ‰¹é‡ä¸‹è½½æ–‡ä»¶--å®ä½“å…³é—­å¤±è´¥&quot;, e2);
                        }
                    }
                    if (in != null) {
                        try {
                            in.close();
                        } catch (Exception e2) {
                            logger.error(&quot;æ‰¹é‡ä¸‹è½½æ–‡ä»¶--æ–‡ä»¶è¾“å…¥æµå…³é—­å¤±è´¥&quot;, e2);
                        }
                    }
                    if (is != null) {
                        try {
                            is.close();
                        } catch (Exception e) {
                            logger.info(&quot;æ‰¹é‡ä¸‹è½½æ–‡ä»¶--è¾“å…¥ç¼“å†²æµå…³é—­å¤±è´¥&quot;, e);
                        }
                    }
                }
            }
        }
    }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Test]]></title>
        <id>https://oceansidez.github.io/post/test/</id>
        <link href="https://oceansidez.github.io/post/test/">
        </link>
        <updated>2024-08-08T03:26:33.000Z</updated>
        <content type="html"><![CDATA[<h1 id="çˆ¶å­çº§å…³ç³»é¡µé¢ä¹‹é—´æ‹¿æ•°æ®js">çˆ¶å­çº§å…³ç³»é¡µé¢ä¹‹é—´æ‹¿æ•°æ®(js)</h1>
<blockquote>
<ol>
<li>åœ¨ä¸€ä¸ªçˆ¶é¡µé¢ä¸­æ‹¿åˆ°å¼¹çª—å­é¡µé¢çš„èŠ‚ç‚¹å€¼,æˆ–è€…å¸Œæœ›æ“ä½œå­é¡µé¢æ–¹æ³•ç­‰ç­‰...</li>
<li>åœ¨å¼¹çª—å­é¡µé¢ä¸­æ‹¿åˆ°çˆ¶é¡µé¢çš„å€¼æˆ–è€…è°ƒç”¨æ–¹æ³•</li>
</ol>
</blockquote>
<h1 id="çˆ¶é¡µé¢ä¸­æ‹¿å­å­é¡µé¢çš„å¯¹è±¡">çˆ¶é¡µé¢ä¸­æ‹¿å­å­é¡µé¢çš„å¯¹è±¡</h1>
<p><strong>å¦‚åœ¨layuiä¸­éœ€è¦æ‰§è¡Œå­é¡µé¢ä¸­çš„æ–¹æ³• checkDataï¼š</strong></p>
<blockquote>
<p>é€šè¿‡<code>$(layero).find(&quot;iframe&quot;)[0].contentWindow</code>â€‹ä¸ºæ‰¾åˆ°é¡µé¢ä¸­æ‰€æœ‰çš„<code>iframe</code>â€‹æ ‡ç­¾ä¸­çš„ç¬¬ä¸€ä¸ªï¼Œå¹¶è·å–å…¶ä¸­çš„<code>contentWindow</code>â€‹å±æ€§ï¼ˆä¸Šä¸‹æ–‡å¯¹ç›¸å½“äºwindownå¯¹è±¡ï¼‰ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå±æ€§è®¿é—®åµŒå¥—ç½‘é¡µä¸­çš„<code>window</code>â€‹å¯¹è±¡ã€‚å¯ä»¥<code>childWindow.document.getElementById('childDiv') </code>â€‹æ‹¿åˆ°å’Œæ“ä½œå­é¡µé¢æ•°æ®</p>
<p>â€‹<code>typeof</code>â€‹ è·å–ç±»å‹</p>
</blockquote>
<pre><code class="language-js">function dofailBonus(bonusId) {
            top.layer.open({
                maxmin: true,
                type: 2,
                area: ['960px', '600px'],
                content: &quot;${ctx}/bonus/undertakebnous/tUndertakeBonusDofail/form?bonusId=&quot; + bonusId,
                title: &quot;å¥–é‡‘ä½œåºŸ&quot;,
                btn: [&quot;é€å®¡&quot;, &quot;å…³é—­&quot;],
                yes: function (index, layero) {
                    if (typeof $(layero).find(&quot;iframe&quot;)[0].contentWindow.checkData == 'function') {
                        var result = $(layero).find(&quot;iframe&quot;)[0].contentWindow.checkData();
                        if (result.code == 'error') {
                            top.layer.msg(result.msg, {icon: 1, time: 3000});
                            return;
                        }
                    }
                    if (typeof $(layero).find(&quot;iframe&quot;)[0].contentWindow.callBackFun == 'function') {
                        if($(layero).find(&quot;iframe&quot;)[0].contentWindow.callBackFun()) {
                            top.layer.close(index);
                            setTimeout('refreshPage()', 1000);
                        }
                    }
                }
            });
        }
</code></pre>
<h1 id="å­é¡µé¢ä¸­æ‹¿çˆ¶é¡µé¢å¯¹è±¡">å­é¡µé¢ä¸­æ‹¿çˆ¶é¡µé¢å¯¹è±¡</h1>
<ul>
<li>
<p><strong>è®¿é—®çˆ¶é¡µé¢çš„windowå¯¹è±¡</strong>:</p>
<pre><code class="language-javascript">var parentWindow = window.parent;
</code></pre>
</li>
<li>
<p><strong>è®¿é—®çˆ¶é¡µé¢çš„documentå¯¹è±¡</strong>:</p>
<pre><code class="language-javascript">var parentDocument = window.parent.document;
</code></pre>
</li>
<li>
<p><strong>è°ƒç”¨çˆ¶é¡µé¢çš„å‡½æ•°</strong>:</p>
<pre><code class="language-javascript">window.parent.someFunctionInParent();
</code></pre>
</li>
<li>
<p><strong>æ“ä½œçˆ¶é¡µé¢ä¸­çš„å…ƒç´ </strong>:</p>
<pre><code class="language-javascript">var parentElement = window.parent.document.getElementById('someElementId');
parentElement.style.display = 'none';
</code></pre>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://oceansidez.github.io/post/hello-gridea/</id>
        <link href="https://oceansidez.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="https://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>